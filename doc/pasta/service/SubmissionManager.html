<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_09) on Wed Nov 12 15:41:00 EST 2014 -->
<title>SubmissionManager</title>
<meta name="date" content="2014-11-12">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="SubmissionManager";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SubmissionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../pasta/service/MossManager.html" title="class in pasta.service"><span class="strong">Prev Class</span></a></li>
<li><a href="../../pasta/service/UnitTestManager.html" title="class in pasta.service"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?pasta/service/SubmissionManager.html" target="_top">Frames</a></li>
<li><a href="SubmissionManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">pasta.service</div>
<h2 title="Class SubmissionManager" class="title">Class SubmissionManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>pasta.service.SubmissionManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@Service(value="submissionManager")
@Repository
public class <span class="strong">SubmissionManager</span>
extends java.lang.Object</pre>
<div class="block">Submission manager.
 <p>
 Manages interaction between controller and data.
 This class works as an abstraction layer between the controller 
 and the underlying data models. This class contains the majority
 of the logic code dealing with objects and their interactions.</div>
<dl><dt><span class="strong">Since:</span></dt>
  <dd>2012-11-13</dd>
<dt><span class="strong">Version:</span></dt>
  <dd>2.0</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>Alex Radu</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../pasta/repository/AssessmentDAO.html" title="class in pasta.repository">AssessmentDAO</a></code></td>
<td class="colLast"><code><strong><a href="../../pasta/service/SubmissionManager.html#assDao">assDao</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.springframework.context.ApplicationContext</code></td>
<td class="colLast"><code><strong><a href="../../pasta/service/SubmissionManager.html#context">context</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../pasta/service/SubmissionManager.html#logger">logger</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../pasta/repository/ResultDAO.html" title="class in pasta.repository">ResultDAO</a></code></td>
<td class="colLast"><code><strong><a href="../../pasta/service/SubmissionManager.html#resultDAO">resultDAO</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../pasta/scheduler/ExecutionScheduler.html" title="class in pasta.scheduler">ExecutionScheduler</a></code></td>
<td class="colLast"><code><strong><a href="../../pasta/service/SubmissionManager.html#scheduler">scheduler</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../pasta/service/SubmissionManager.html#SubmissionManager()">SubmissionManager</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,<a href="../../pasta/domain/result/AssessmentResult.html" title="class in pasta.domain.result">AssessmentResult</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../pasta/service/SubmissionManager.html#getLatestResultsForUser(java.lang.String)">getLatestResultsForUser</a></strong>(java.lang.String&nbsp;username)</code>
<div class="block">Helper method</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../pasta/service/SubmissionManager.html#runAssessment(pasta.domain.template.Assessment, java.util.Collection)">runAssessment</a></strong>(<a href="../../pasta/domain/template/Assessment.html" title="class in pasta.domain.template">Assessment</a>&nbsp;assessment,
             java.util.Collection&lt;<a href="../../pasta/domain/PASTAUser.html" title="class in pasta.domain">PASTAUser</a>&gt;&nbsp;allUsers)</code>
<div class="block">Schedule the latest attempt of an assessment for a collection of users that have
 submitted for execution.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../pasta/service/SubmissionManager.html#runAssessment(java.lang.String, java.lang.String, java.lang.String)">runAssessment</a></strong>(java.lang.String&nbsp;username,
             java.lang.String&nbsp;assessmentName,
             java.lang.String&nbsp;assessmentDate)</code>
<div class="block">Schedule an assessment attempt for a given user for execution</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../pasta/service/SubmissionManager.html#setMyScheduler(pasta.scheduler.ExecutionScheduler)">setMyScheduler</a></strong>(<a href="../../pasta/scheduler/ExecutionScheduler.html" title="class in pasta.scheduler">ExecutionScheduler</a>&nbsp;myScheduler)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../pasta/service/SubmissionManager.html#submit(java.lang.String, pasta.domain.upload.Submission)">submit</a></strong>(java.lang.String&nbsp;username,
      <a href="../../pasta/domain/upload/Submission.html" title="class in pasta.domain.upload">Submission</a>&nbsp;form)</code>
<div class="block">Process the submission of an assessment</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="assDao">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assDao</h4>
<pre>private&nbsp;<a href="../../pasta/repository/AssessmentDAO.html" title="class in pasta.repository">AssessmentDAO</a> assDao</pre>
</li>
</ul>
<a name="resultDAO">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resultDAO</h4>
<pre>private&nbsp;<a href="../../pasta/repository/ResultDAO.html" title="class in pasta.repository">ResultDAO</a> resultDAO</pre>
</li>
</ul>
<a name="scheduler">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduler</h4>
<pre>private&nbsp;<a href="../../pasta/scheduler/ExecutionScheduler.html" title="class in pasta.scheduler">ExecutionScheduler</a> scheduler</pre>
</li>
</ul>
<a name="context">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>context</h4>
<pre>private&nbsp;org.springframework.context.ApplicationContext context</pre>
</li>
</ul>
<a name="logger">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>logger</h4>
<pre>public static final&nbsp;org.apache.log4j.Logger logger</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SubmissionManager()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SubmissionManager</h4>
<pre>public&nbsp;SubmissionManager()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setMyScheduler(pasta.scheduler.ExecutionScheduler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMyScheduler</h4>
<pre>public&nbsp;void&nbsp;setMyScheduler(<a href="../../pasta/scheduler/ExecutionScheduler.html" title="class in pasta.scheduler">ExecutionScheduler</a>&nbsp;myScheduler)</pre>
</li>
</ul>
<a name="submit(java.lang.String, pasta.domain.upload.Submission)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submit</h4>
<pre>public&nbsp;void&nbsp;submit(java.lang.String&nbsp;username,
          <a href="../../pasta/domain/upload/Submission.html" title="class in pasta.domain.upload">Submission</a>&nbsp;form)</pre>
<div class="block">Process the submission of an assessment
 <p>
 <ol>
        <li>Create new folder to hold the submission
  ($ProjectLocation$/submissions/$username$/assessments/$assessmentName$/$date$/submission)</li>
  <li>Copy submission file from memory to the newly created folder</li>
  <li>Extract the submitted file if it ends with .zip using <a href="../../pasta/util/PASTAUtil.html#extractFolder(java.lang.String)"><code>PASTAUtil.extractFolder(String)</code></a></li>
  <li>If there are any unit tests associated with the assessment, check to see if there are any compilation errors.
  This process is done by copying the submission and then the unit tests to 
  $ProjectLocation$/submissions/$username$/assessments/$assessmentName$/$date$/unitTests/$unitTestName.
  This order of copy was chosen such that the unit test code will override any identically named file that
  the student has submitted (e.g. makefiles), which could compromise the security of the machine or 
  validity of the assessment. The ant tasks compile and clean are executed and any errors during
  this process are written to compile.errors and run.errors.</li>
  <li>Clean up the testing code by deleting everything other that "compile.errors", "run.errors" and "results.xml"</li>
  <li>The cache is updated with the new submission information (testing queued/compile errors)</li>
  <li>If the submission compiled, run the assessment using <a href="../../pasta/service/SubmissionManager.html#runAssessment(java.lang.String, java.lang.String, java.lang.String)"><code>runAssessment(String, String, String)</code></a></li>
 </ol></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>username</code> - the name of the user</dd><dd><code>form</code> - the submission form</dd></dl>
</li>
</ul>
<a name="getLatestResultsForUser(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLatestResultsForUser</h4>
<pre>public&nbsp;java.util.Map&lt;java.lang.String,<a href="../../pasta/domain/result/AssessmentResult.html" title="class in pasta.domain.result">AssessmentResult</a>&gt;&nbsp;getLatestResultsForUser(java.lang.String&nbsp;username)</pre>
<div class="block">Helper method</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>username</code> - the name of the user</dd>
<dt><span class="strong">Returns:</span></dt><dd>a map containing the latest results for a given user.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../pasta/repository/ResultDAO.html#getLatestResults(java.lang.String)"><code>ResultDAO.getLatestResults(String)</code></a></dd></dl>
</li>
</ul>
<a name="runAssessment(java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runAssessment</h4>
<pre>public&nbsp;void&nbsp;runAssessment(java.lang.String&nbsp;username,
                 java.lang.String&nbsp;assessmentName,
                 java.lang.String&nbsp;assessmentDate)</pre>
<div class="block">Schedule an assessment attempt for a given user for execution</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>username</code> - the name of the user</dd><dd><code>assessmentName</code> - the short name (no whitespace) of the assessment</dd><dd><code>assessmentDate</code> - the date of the assessment (format yyyy-MM-dd'T'HH-mm-ss)</dd></dl>
</li>
</ul>
<a name="runAssessment(pasta.domain.template.Assessment, java.util.Collection)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>runAssessment</h4>
<pre>public&nbsp;void&nbsp;runAssessment(<a href="../../pasta/domain/template/Assessment.html" title="class in pasta.domain.template">Assessment</a>&nbsp;assessment,
                 java.util.Collection&lt;<a href="../../pasta/domain/PASTAUser.html" title="class in pasta.domain">PASTAUser</a>&gt;&nbsp;allUsers)</pre>
<div class="block">Schedule the latest attempt of an assessment for a collection of users that have
 submitted for execution.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>assessment</code> - the assessment for which the latest attempts must be re-run</dd><dd><code>allUsers</code> - the collection of users for which the latest attempt will be executed</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SubmissionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../pasta/service/MossManager.html" title="class in pasta.service"><span class="strong">Prev Class</span></a></li>
<li><a href="../../pasta/service/UnitTestManager.html" title="class in pasta.service"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?pasta/service/SubmissionManager.html" target="_top">Frames</a></li>
<li><a href="SubmissionManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
